{
  "schemaVersion": "1.0",
  "name": "monolith-python-to-rust-parity-orchestration",
  "description": "Runnable Unpack task graph to drive exhaustive Python->Rust parity for monolith/: validate inventory+checklists, build/normalize a canonical mapping table, generate domain port plans (agent_service/core/native_training/TF runtime), and produce a parity dashboard for next actions.",
  "entry": "task/index.ai.tsx",
  "modules": [
    {
      "id": "discover-summary",
      "path": "task/00-discover-summary.ai.tsx",
      "description": "Sanity-check required repo roots (monolith/, monolith-rs/) and load existing parity artifacts into a bounded discovery summary JSON."
    },
    {
      "id": "discover-report",
      "path": "task/00-discover-report.ai.tsx",
      "description": "Write a brief discovery report derived from the discovery summary JSON.",
      "dependsOn": ["discover-summary"]
    },
    {
      "id": "validate-inventory",
      "path": "task/01-validate-inventory.ai.tsx",
      "description": "Validate that every monolith/**/*.py file is accounted for (expected 334): parity index row count matches checklist files; report missing/extra items and emit machine-readable counts/diffs.",
      "dependsOn": ["discover-summary"]
    },
    {
      "id": "generate-mapping-table",
      "path": "task/10-generate-mapping-table.ai.tsx",
      "description": "Generate/refresh a canonical Python->Rust mapping table for every Python file (destination crate/module, status, notes, and explicit N/A justifications).",
      "dependsOn": ["validate-inventory"]
    },
    {
      "id": "normalize-mapping",
      "path": "task/11-normalize-mapping.ai.tsx",
      "description": "Normalize mapping conventions (crate/module naming, tests/fixtures layout, proto/op boundaries, and required N/A justification schema) and emit conventions doc+JSON.",
      "dependsOn": ["generate-mapping-table"]
    },
    {
      "id": "agent-service-plan",
      "path": "task/20-agent-service-plan.ai.tsx",
      "description": "Create an implementation-ready plan for monolith/agent_service/** parity in monolith-rs (monolith-serving): file clustering, target modules, and test harness strategy (fake ZK + fake TFServing).",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "agent-service-impl",
      "path": "task/21-agent-service-impl.ai.tsx",
      "description": "Optional execution placeholder for a first implementation slice of monolith/agent_service/** (e.g., data_def + mocked_zkclient + basic backends), or ticketization into implementation-ready work items.",
      "dependsOn": ["agent-service-plan"]
    },
    {
      "id": "core-plan",
      "path": "task/30-core-plan.ai.tsx",
      "description": "Create a parity plan for monolith/core/** infra (hyperparams, base_layer/task, feature/model registry, hooks): identify high-risk semantics and required Rust test strategies.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "utils-and-entrypoints-plan",
      "path": "task/35-utils-and-entrypoints-plan.ai.tsx",
      "description": "Plan parity for top-level monolith utilities and entrypoints (monolith/utils.py, path_utils.py, base_runner.py, gpu_runner.py, tpu_runner.py) plus workspace/config glue (monolith_workspace.bzl, tf_serving_workspace.bzl): map CLI/env/config semantics and Rust destinations.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "native-training-plan",
      "path": "task/40-native-training-plan.ai.tsx",
      "description": "Segment monolith/native_training/** into subdomains, flag TF-dependent vs TF-optional paths, map to Rust crates/modules, and propose milestone ordering with parity checks.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "tf-runtime-plan",
      "path": "task/50-tf-runtime-plan.ai.tsx",
      "description": "Define optional TensorFlow runtime integration contract (dynamic libtensorflow loading, custom op loading, signatures, SavedModel IO), and enumerate parity gaps that require TF runtime.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "third-party-and-codegen-plan",
      "path": "task/60-third-party-and-codegen-plan.ai.tsx",
      "description": "Account for non-monolith Python-adjacent behavior dependencies: third_party/org_tensorflow/** patches, custom op build/load surfaces, protobuf/codegen steps, and any Python-dependent tooling that affects runtime semantics; map to Rust build/features and track explicit parity gaps.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "parity-test-harness-plan",
      "path": "task/80-parity-test-harness-plan.ai.tsx",
      "description": "Define repeatable parity validation harnesses: golden fixtures, Python-vs-Rust differential tests, gRPC/proto compatibility tests, and TF-optional gating (Candle default, TF runtime best-effort).",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "parity-dashboard",
      "path": "task/90-parity-dashboard.ai.tsx",
      "description": "Roll up inventory validation, mapping, conventions, and domain plans into a single parity dashboard: coverage status, open parity gaps, and prioritized next work queue.",
      "dependsOn": [
        "validate-inventory",
        "generate-mapping-table",
        "normalize-mapping",
        "agent-service-plan",
        "agent-service-impl",
        "core-plan",
        "utils-and-entrypoints-plan",
        "native-training-plan",
        "tf-runtime-plan",
        "third-party-and-codegen-plan",
        "parity-test-harness-plan"
      ]
    },
    {
      "id": "index",
      "path": "task/index.ai.tsx",
      "description": "Entrypoint orchestrator: imports and sequences phases (discover/validate -> mapping -> domain plans -> dashboard) and emits final human-facing deliverable(s).",
      "dependsOn": ["parity-dashboard"]
    }
  ]
}
