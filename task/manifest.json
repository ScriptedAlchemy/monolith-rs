{
  "schemaVersion": "1.0",
  "name": "Monolith Python to Monolith-RS Parity Master Plan",
  "description": "Runnable Unpack task graph to maintain an exhaustive Python->Rust parity plan for monolith/: validate inventory + checklists, generate and normalize a canonical mapping table, produce domain port plans (agent_service/core/native_training), define optional TF runtime integration constraints, and emit a parity dashboard report.",
  "entry": "task/index.ai.tsx",
  "modules": [
    {
      "id": "index",
      "path": "task/index.ai.tsx",
      "description": "Entrypoint orchestrator: enforces phase ordering by importing/depending on all modules and produces the final run summary/deliverable."
    },
    {
      "id": "discover-artifacts",
      "path": "task/00-discover.ai.tsx",
      "description": "Sanity-check repo layout and load existing parity artifacts (PYTHON_PARITY_INDEX.md and per-file checklists) as stable inputs for subsequent phases."
    },
    {
      "id": "validate-inventory",
      "path": "task/01-validate-inventory.ai.tsx",
      "description": "Validate Python file inventory vs parity checklist coverage (missing/extra), and validate index row count matches checklist count; emit report + machine-readable JSON summary.",
      "dependsOn": ["discover-artifacts"]
    },
    {
      "id": "generate-mapping-table",
      "path": "task/10-generate-mapping-table.ai.tsx",
      "description": "Generate/refresh a canonical Python->Rust mapping table for all monolith/**/*.py (target crates/modules, status, notes), seeding from existing draft mappings and per-file checklists.",
      "dependsOn": ["validate-inventory"]
    },
    {
      "id": "normalize-mapping",
      "path": "task/11-normalize-mapping.ai.tsx",
      "description": "Normalize mapping conventions (crate/module naming, test/fixture placement, N/A justification format) and emit a conventions doc + JSON for downstream planners.",
      "dependsOn": ["generate-mapping-table"]
    },
    {
      "id": "agent-service-plan",
      "path": "task/20-agent-service-plan.ai.tsx",
      "description": "Produce a concrete, implementable sub-plan for monolith/agent_service/** parity (grouping, Rust module targets, fake ZK/TFServing test harness strategy, execution order).",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "core-plan",
      "path": "task/30-core-plan.ai.tsx",
      "description": "Produce a concrete sub-plan for monolith/core/** parity, prioritizing hyperparams, feature/env semantics, model_registry, and base_layer/task/model_params, including test parity requirements.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "native-training-plan",
      "path": "task/40-native-training-plan.ai.tsx",
      "description": "Segment monolith/native_training/** into implementable domains (data pipeline, distribution/runtime, export/checkpoint, hooks/metrics) and map each to Rust crates with parity risks and dependency ordering.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "tf-runtime-plan",
      "path": "task/50-tf-runtime-plan.ai.tsx",
      "description": "Define optional TensorFlow runtime integration plan (dynamic libtensorflow loading, custom op loading, SavedModel parsing/signatures) and list which parity gaps require TF runtime vs Candle-only feasibility.",
      "dependsOn": ["normalize-mapping"]
    },
    {
      "id": "parity-dashboard",
      "path": "task/90-parity-dashboard.ai.tsx",
      "description": "Roll up validation + mapping + domain plans into an end-to-end parity dashboard (coverage by crate, open gaps, next prioritized work queue).",
      "dependsOn": [
        "validate-inventory",
        "generate-mapping-table",
        "normalize-mapping",
        "agent-service-plan",
        "core-plan",
        "native-training-plan",
        "tf-runtime-plan"
      ]
    }
  ]
}

